"use strict";(self.webpackChunkFullStackSocialApp=self.webpackChunkFullStackSocialApp||[]).push([[35],{8035:(T,f,n)=>{n.r(f),n.d(f,{MeetModule:()=>S});var g=n(6424),l=n(801),v=n(5689),e=n(1571),b=n(4961),M=n(7185),y=n(9901),u=n(6895),a=n(3546),h=n(4859),p=n(3868),d=n(1576),x=n(3162);function C(r,c){1&r&&e._UZ(0,"mat-progress-bar",5)}function F(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",6)(1,"mat-card",7)(2,"mat-card-header")(3,"div",8)(4,"img",9),e.NdJ("error",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.onError(o))}),e.qZA()(),e.TgZ(5,"mat-card-title"),e._uU(6),e.qZA(),e.TgZ(7,"mat-card-subtitle"),e._uU(8),e.qZA()(),e._UZ(9,"mat-card-content"),e.TgZ(10,"mat-card-actions")(11,"button",10),e.NdJ("click",function(){const i=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.likeUser(i.id,i))}),e._uU(12),e._UZ(13,"fa-icon",11),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){const i=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.requestFriend(i.id,i))}),e._UZ(15,"fa-icon",11),e.qZA()()()()}if(2&r){const t=c.$implicit,s=e.oxw();e.xp6(4),e.s9C("alt",t.avatar),e.Q6J("src","/FullStackSocialApp/assets/img/"+t.avatar+".png",e.LSH),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.hij("Avatar: ",t.avatar,""),e.xp6(4),e.hij("",t.likes," "),e.xp6(1),e.Tol(t.isLiked?"":"icon-disabled"),e.Q6J("id","faHeartIcon"+t.id)("icon",s.faHeart),e.xp6(2),e.Tol(t.hasRequested||t.isFriend?"":"icon-disabled"),e.Q6J("id","faUserIcon"+t.id)("icon",t.isFriend?s.faUserGroup:s.faUserPlus)}}let k=(()=>{class r{constructor(t,s,o){this.usersService=t,this.elementRef=s,this.toastr=o,this.usersLoaded=!1,this.faHeart=l.m6i,this.faUserPlus=l.FKd,this.faUserGroup=l.NdV,this.userMe={},this.users=[]}ngOnInit(){this.retrieveAll(),this.socket=(0,v.ZP)("https://fullstacksocialappsocket-nodejs.onrender.com/")}onError(t){t.target.src="/FullStackSocialApp/assets/img/avatar.png"}retrieveAll(){this.usersService.getUserByToken().subscribe({next:t=>{this.userMe=t,this.usersService.getAllUsers().subscribe({next:s=>{s=s.filter(o=>o.id!==t.id),Object.assign(this.users,s),this.users.forEach(o=>{o.isLiked=!!this.userMe.userLikes.find(i=>i.id===o.id),o.hasRequested=!!this.userMe.userRequestFriends.find(i=>i.id===o.id),o.isFriend=!!this.userMe.userFriends.find(i=>i.id===o.id)}),this.usersLoaded=!0}})}})}likeUser(t,s){s.isLiked?s.isLiked&&this.usersService.unlikeUserIdByToken(t).subscribe({next:()=>{document.getElementById("faHeartIcon"+t).children[0].classList.remove("fa-beat"),document.getElementById("faHeartIcon"+t).children[0].classList.add("fa-bounce"),s.isLiked=!1,s.likes--}}):this.usersService.likeUserIdByToken(t).subscribe({next:()=>{document.getElementById("faHeartIcon"+t).children[0].classList.add("fa-beat"),document.getElementById("faHeartIcon"+t).children[0].classList.remove("fa-bounce"),s.isLiked=!0,s.likes++}})}requestFriend(t,s){if(s.isFriend)this.toastr.error("You are already friends with this user","Error");else{for(let o of s.userRequestFriends)if(o.id===this.userMe.id)return void this.toastr.error("This user has already requested to be your friend (go to notifications)","Error");s.hasRequested?s.hasRequested&&this.usersService.unrequestFriendByToken(t).subscribe({next:()=>{s.hasRequested=!1,document.getElementById("faUserIcon"+t).children[0].classList.remove("fa-beat"),document.getElementById("faUserIcon"+t).children[0].classList.add("fa-bounce"),this.socket.emit("notification",t)}}):this.usersService.requestFriendByToken(t).subscribe({next:()=>{s.hasRequested=!0,document.getElementById("faUserIcon"+t).children[0].classList.add("fa-beat"),document.getElementById("faUserIcon"+t).children[0].classList.remove("fa-bounce"),this.socket.emit("notification",t)}})}}ngAfterViewInit(){this.elementRef.nativeElement.ownerDocument.body.style.backgroundColor="#e0ecf4"}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b.f),e.Y36(e.SBq),e.Y36(M._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-meet"]],decls:6,vars:2,consts:[["mode","indeterminate",4,"ngIf"],[2,"margin-top","20px"],[1,"content"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex","25%","fxFlex.xs","100%","fxFlex.sm","50%",4,"ngFor","ngForOf"],["mode","indeterminate"],["fxFlex","25%","fxFlex.xs","100%","fxFlex.sm","50%"],[2,"background-color","#98ccdc","min-width","150px"],["mat-card-avatar",""],[2,"width","40px","background-size","cover",3,"src","alt","error"],["mat-button","","color","accent",2,"font-size","20px",3,"click"],[2,"--fa-animation-duration","0.5s","--fa-animation-iteration-count","1",3,"id","icon"],["mat-button","","color","primary",2,"font-size","20px",3,"click"]],template:function(t,s){1&t&&(e._UZ(0,"app-navbar"),e.YNc(1,C,1,0,"mat-progress-bar",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3),e.YNc(5,F,16,13,"div",4),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",!s.usersLoaded),e.xp6(4),e.Q6J("ngForOf",s.users))},dependencies:[y.S,u.sg,u.O5,a.a8,a.dk,a.dn,a.n5,a.$j,a.hq,a.kc,h.lW,p.BN,d.xw,d.SQ,d.yH,x.pW],styles:[".icon-disabled[_ngcontent-%COMP%]{color:#e0ecf4}.beat[_ngcontent-%COMP%]{transform:scale(2)}@keyframes beat-animation{0%{font-size:14px}50%{font-size:18px}to{font-size:14px}}mat-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.content[_ngcontent-%COMP%]{padding:16px}.content[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{margin-bottom:16px}.column-label[_ngcontent-%COMP%]{margin-right:8px;font-size:1rem}"]}),r})();var I=n(6759),U=n(782);const L=[{path:"",component:k}];let S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.Bz.forChild(L),I.W,U.N6,u.ez,a.QW,h.ot,p.uH,d.ae,x.Cv]}),r})()}}]);